<!DOCTYPE html>
<html>
  <head>
    <style>
       #map {
        height: 400px;
        width: 100%;
       }
    </style>
  </head>
  <body>
    <h3>My Google Maps Demo</h3>
    <div id="map"></div>
    <script>
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: {lat: -25.363, lng: 131.044}
        });
        var marker = new google.maps.Marker({
          position: {lat: -25.363, lng: 131.044},
          map: map
        });
        map.addListener('click', addGeoFence);


        // create a movable editable rectangle for event area geo fence on click
        var count = 0;
        function addGeoFence(event) {
          if (count == 0) {
            var vertex1lat = event.latLng.lat();
            var vertex1lng = event.latLng.lng();
            var vertex2lat = vertex1lat;
            var vertex2lng = vertex1lng + .5;
            var vertex3lat = vertex1lat - .2;
            var vertex3lng = vertex1lng;
            var vertex4lat = vertex1lat - .2;
            var vertex4lng = vertex1lng + .5;

            var rectangleCoords = [
              {lat: vertex1lat, lng: vertex1lng},
              {lat: vertex2lat, lng: vertex2lng},
              {lat: vertex4lat, lng: vertex4lng},
              {lat: vertex3lat, lng: vertex3lng}
            ];

            var bounds = {
              north: vertex1lat,
              west: vertex1lng,
              south: vertex1lat - .1,
              east: vertex1lng + .2
            };

            var geoFence = new google.maps.Rectangle({
              bounds: bounds,
              paths: rectangleCoords,
              strokeColor:'#2ea884',
              strokeOpacity: 0.7,
              strokeWeight: 2,
              fillColor:'#2ea884',
              fillOpacity: 0.2,
              draggable: true,
              editable: true
            });
            geoFence.setMap(map); // add to map
            count++;
          }
          }

    }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyATRg7QT97jEQOaNjwwtMF7o-fnxdrGIxM&callback=initMap">
    </script>
  </body>
</html>
